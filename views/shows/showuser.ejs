<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body class="d-flex flex-column vh-100 ">

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
        <a class="navbar-brand" href="#">ShowManager</a>
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/">Home</a>
            
          </li>
          <li class="nav-item">
           
          </li>
          <!-- <li class="nav-item">
            <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
          </li> -->
        </ul>
      
        <!-- <a class="nav-link" href="#">Login</a>
        <a class="nav-link" href="#">Register</a> -->
        <% if(!currentUser) { %>
          <a class="nav-link" href="/login">Login</a>
          <a class="nav-link" href="/newuser">Register</a>
          <% } else { %>
            
          <a class="nav-link" href="/logout">Logout</a>
          <a class="nav-link " style="text-align: right;" href="/userinfo/<%=sr.id%>/editp">Edit_Profile</a>
          <% } %>
      </div>
    </div>
  </nav>
  <main>
    <%-include('../partials/flash') %>
  







    
    <div class=" border border-light">
      
      <div class="row">
        <img src="https://res.cloudinary.com/dcll4p76y/image/upload/v1718369856/projectrefimage/blank-profile-picture-973460_1280_fjtn2t.png" alt=""  style="height: 10rem; width: 11rem; float: left; margin: 0 0 0 5px;" class="rounded-3" >
        <div class="col" style="font-size: 20px;">
          Name : <%=sr.Name%>
        </div>
        <div class="col" style="font-size: 20px;">
          Age : <%=sr.Age%>yr
        </div>
        <div class="col" style="font-size: 20px;">
          Country:<span class=" sht" style="font-size: 20px;">
            <%=sr.Country%>
          </span>
          <div class="col" style="font-size: 20px;">
            Gender: <span class=" swt" style="font-size: 20px;">
              <%=sr.Gender%>
            </span>
          </div>
      </div>
    
       


      </div>
    </div>


    <hr class="bg-danger border-2 border-top border-primary" />
  </main>

  <div class="row d-flex text-center" id="container" style=" width: auto">
      
    <h1> Your watchlist</h1>

</div>


  
    

   <!-- <%=sr.showid%> -->
  

   <div class="card mb-5 border collapse  " >

    <% for(let dd of sr.showid) { %>
      <div class="card mb-1  ">
        <div class="card-body border border-light ">
          <span class="card-text" style="font-size: 20px;">weight:</span>
          <span class="storage">
            <%=dd.idno %>
          </span>
          <a href="/delete/wishlist/<%=dd.idno%>">del</a>
          

          
        </div>
      </div>
      <% } %>
  </div>

  <script>

    var hlist = document.querySelectorAll(".storage")
let we=[]

    for (var value of hlist) {
          we.push(parseInt(value.innerHTML));
         
        }
    if(we.length>0){
   for(let ft of we){
    f();
    async function f() {
      const rest= await axios.get(` https://api.tvmaze.com/shows/${ft}`)
      // console.log(rest.data.id)
      const para=document.createElement('div');
         para.style="width: 20rem; "
            para.className = "card boarder border-3"
            const title=document.createElement('h6');
            let name=document.createTextNode(rest.data.name);
            title.append(name);
            para.append(title)
            const img=document.createElement('IMG');
            img.src=rest.data.image.medium;
          img.className="d-block "
                    img.style="height: 14rem; width: 15rem;"
            para.append(img);
            const button=document.createElement('button')
            button.style="margin: 0 -15px 0px 0px;"
            button.className="btn btn-primary text "
            button.innerHTML="remove"
            my_form=document.createElement('FORM');
my_form.name='myForm';
my_form.method='GET';
 const idd=rest.data.id;
//  console.log(idd)
// console.log(cast.person.id)

 my_form.action=`/delete/wishlist/${idd}`;
my_form.appendChild(button);
para.append(my_form)
            document.getElementById("container").appendChild(para)
    }
   }

    



    }
    
            </script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>