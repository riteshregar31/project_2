<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personinfo</title>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    <!-- <p><%=id%></p> -->
    <div id="pinfo" class="col d-flex flex-column">
       <h1> Person Info</h1>
    </div>
    <br>
    <br>
    <div class="row d-flex" id="castinfo" style=" width: auto">
        <h1>Cast info</h1></div>
        <br>
        <br>
    <div id="crewinfo"><h1>Crew info</h1></div>
  
    <script>
first();
async function first(){
    const rest=await axios.get(` https://api.tvmaze.com/people/<%=id%>`)
    console.log(rest.data)
    const para=document.createElement('div');
     para.style="width: auto;height:auto;  "
            para.className = " border border-2"
    const bday=document.createTextNode(rest.data.birthday);
    const gender=document.createTextNode(rest.data.gender);
    const name=document.createTextNode(rest.data.name);
    if(rest.data.image){
        const img=document.createElement('IMG');
         img.className="d-block w-10"
                    img.style="height: 20rem; width: 20rem; float: left; margin: 0 0 0 15px;"
        img.src=rest.data.image.medium
        para.append(img);
    }
    const gen1=document.createElement('span')
        var gent=document.createTextNode(" Name:");
        gen1.append(gent)
        gen1.append(name)
        
    para.append(gen1)
    var br = document.createElement("br");
                // para.append(br)
                para.append(br);
    const gen=document.createElement('span')
        var gent=document.createTextNode(" Birthdate:");
        gen.append(gent)
        gen.append(bday)
    para.append(gen)
    var br = document.createElement("br");
                // para.append(br)
                para.append(br);


                
  
    // para.append(name)
    const g=document.createElement('span');
    var gg=document.createTextNode('Gender: ')
    g.append(gg);
    g.append(gender)

    para.append(g)
    var br = document.createElement("br");
                // para.append(br)
                para.append(br);
    if(rest.data.country.name){
        const gen=document.createElement('span')
        var gent=document.createTextNode(" Country:");
        gen.append(gent)
        const country=document.createTextNode(rest.data.country.name);
        gen.append(country)
        para.append(gen)
        var br = document.createElement("br");
                // para.append(br)
                para.append(br);
    }
    document.getElementById("pinfo").appendChild(para)
    // basicinfo(rest.data)
}

second();
async function second(){
    const rest=await axios.get(`https://api.tvmaze.com/people/<%=id%>/castcredits?embed=show`)
    // console.log(rest.data)
    castinfofn(rest.data);
}
const castinfofn =(infos)=>{
    for(let info of infos){
        const para=document.createElement('div');
          para.style="width: 20rem;"
            para.className = "card boarder border-3"
        const showname=document.createTextNode(info._embedded.name);
        if(info._embedded.show.image){
                    // console.log(season.image.medium)
                    const img=document.createElement('IMG');
                     img.className="d-block "
                    img.style="height: 14rem; width: 15rem;"
                    img.src=info._embedded.show.image.medium;
                    para.append(img);
                }



                const button=document.createElement('button')
                button.innerHTML="More info"
                my_form=document.createElement('FORM');
my_form.name='myForm';
my_form.method='GET';
const idd=info._embedded.show.id
// console.log(cast.person.id)

my_form.action=`/showinfo/${idd}`;
my_form.appendChild(button);
para.append(my_form)
document.getElementById("castinfo").appendChild(para)
    }
}
third();
async function third(){
 const rest=   await axios.get(`https://api.tvmaze.com/people/<%=id%>/crewcredits?embed=show`)
    // console.log(rest.data)
    creww(rest.data);
}
const creww =(infos)=>{
    for(let info of infos){
        const para=document.createElement('div');
         para.style="width: 20rem;"
            para.className = "card boarder border-3"
        const type=document.createTextNode(info.type);
        const showname=document.createTextNode(info._embedded.name);
        if(info._embedded.show.image){
                    // console.log(season.image.medium)
                    const img=document.createElement('IMG');
                     img.className="d-block "
                    img.style="height: 14rem; width: 15rem;"
                    img.src=info._embedded.show.image.medium;
                    para.append(img);
                }

para.append(type)

                const button=document.createElement('button')
                button.innerHTML="More info"
                my_form=document.createElement('FORM');
my_form.name='myForm';
my_form.method='GET';
const idd=info._embedded.show.id
// console.log(cast.person.id)

my_form.action=`/showinfo/${idd}`;
my_form.appendChild(button);
para.append(my_form)
document.getElementById("crewinfo").appendChild(para)
    }

}


    </script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>